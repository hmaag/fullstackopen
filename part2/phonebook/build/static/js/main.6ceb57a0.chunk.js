(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(14),a=t.n(r),o=t(3),u=t(0),i=function(e){var n=e.person;return Object(u.jsxs)(u.Fragment,{children:[n.name," ",n.number]})},s=function(e){var n=e.persons,t=e.filter,c=e.removePerson;return(0===t.length?n:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))).map((function(e){return Object(u.jsxs)("div",{children:[Object(u.jsx)(i,{person:e,name:e.name,number:e.number}),Object(u.jsx)("button",{type:"button",value:e.id,onClick:c,children:"delete"}),Object(u.jsx)("br",{})]},e.id)}))},l=function(e){return Object(u.jsxs)("form",{onSubmit:e.addPerson,children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{children:"name "}),Object(u.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{children:"number "}),Object(u.jsx)("input",{type:"tel",value:e.newNumber,onChange:e.handleNumberChange})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.filter,t=e.handleFilter;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("label",{children:"filter names with : "}),Object(u.jsx)("input",{value:n,onChange:t})]})},b=function(e){var n=e.message;return null===n?null:Object(u.jsx)("div",{className:"success",children:n})},h=t(4),j=t.n(h),f="/api/persons",m=function(){return j.a.get(f).then((function(e){return e.data}))},O=function(e){return j.a.post(f,e).then((function(e){return e.data}))},p=function(e,n){return j.a.put("".concat(f,"/").concat(e.id),n).then((function(e){return e.data}))},v=function(e){return j.a.delete("".concat(f,"/").concat(e.id)).then((function(e){return e}))},x=function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),i=Object(o.a)(a,2),h=i[0],j=i[1],f=Object(c.useState)(""),x=Object(o.a)(f,2),g=x[0],w=x[1],k=Object(c.useState)(""),C=Object(o.a)(k,2),N=C[0],y=C[1],S=Object(c.useState)(null),T=Object(o.a)(S,2),F=T[0],P=T[1];Object(c.useEffect)((function(){m().then((function(e){r(e)}))}),[]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"phonebook"}),Object(u.jsx)(b,{message:F}),Object(u.jsx)(d,{filter:N,handleFilter:function(e){y(e.target.value)}}),Object(u.jsx)("br",{}),Object(u.jsx)("h2",{children:"add a new person"}),Object(u.jsx)(l,{addPerson:function(e){e.preventDefault();var n={name:h,number:g};if(t.map((function(e){return e.name})).includes(h)){var c=t.find((function(e){return e.name===h})),a=c.id;window.confirm("".concat(c.name," is already added to the phonebook. Replace the old number with a new one?"))&&(n.id=a,p(c,n).then((function(e){r(t.map((function(n){return n.id!==a?n:e}))),P("".concat(c.name,"'s phone number has been updated")),setTimeout((function(){P(null)}),3e3)})).catch((function(e){P("".concat(c.name," has already been removed from the phonebook")),setTimeout((function(){P(null)}),3e3),r(t.filter((function(e){return e.id!==a})))})))}else O(n).then((function(e){r(t.concat(e)),j(""),w("")})),P("".concat(h," has been added to the phonebook")),setTimeout((function(){P(null)}),3e3)},newName:h,handleNameChange:function(e){j(e.target.value)},newNumber:g,handleNumberChange:function(e){w(e.target.value)}}),Object(u.jsx)("h2",{children:"numbers"}),Object(u.jsx)(s,{persons:t,filter:N,removePerson:function(e){e.preventDefault();var n=parseInt(e.target.value),c=t.find((function(e){return e.id===n}));window.confirm("Delete ".concat(c.name))&&v(c).then((function(){r(t.filter((function(e){return e.id!==n}))),P("".concat(c.name," has been removed from the phonebook")),setTimeout((function(){P(null)}),3e3)})).catch((function(e){P("".concat(c.name," has already been removed from the phonebook")),setTimeout((function(){P(null)}),3e3),r(t.filter((function(e){return e.id!==n})))}))}})]})};t(38);a.a.render(Object(u.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.6ceb57a0.chunk.js.map